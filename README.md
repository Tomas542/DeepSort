# PPE Detection

## Introduction

This repository contains a personal webapp that detect different PPE. The detections generated by [YOLOv5](https://github.com/ultralytics/yolov5), passed to a [Deep Sort algorithm](https://github.com/ZQPei/deep_sort_pytorch) which combines motion and appearance information based on [OSNet](https://github.com/KaiyangZhou/deep-person-reid) in order to tracks the objects.


## Before running

1. Clone the repository recursively:

`git clone --recurse-submodules https://github.com/Tomas542/DeepSort_Gstreamer.git`

2. Make sure that you fulfill all the requirements: Python 3.8 or later with all [requirements.txt](https://github.com/mikel-brostrom/Yolov5_DeepSort_Pytorch/blob/master/requirements.txt) dependencies installed, including torch>=1.7. To install, run:

`pip install -r requirements.txt`

3. Make the DataBase for all tracked units:

`sudo -u postgres psql`

In opened postgres console you have to:

```
CREATE DATABASE webapp_db;
CREATE SCHEMA main;
CREATE TABLE main.info (id SERIAL NOT NULL, video TEXT, time_found TEXT, time_lost TEXT, class TEXT, number TEXT, time TEXT, accuracy TEXT);
```


## Running through python

To run the app using python, all you have to do is:

`python Webapp/app.py`

## Running through docker

To run the app using docker, you have to:

`docker-compose up -d`

To stop and rerun docker, you can:

```
docker-compose stop
docker-compose start
```


## How to use

To use the app, you have to run it first (using steps shown), and go to `localhost:8080`,
then you can check out descriptions about us and project, or upload your media(pics, videos(only mp4 supported)),
wait untill it's processed and then watch or download it, or download logs with all tracked units (it will also be shown in your database)
